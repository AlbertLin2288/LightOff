<html>
  <head>
    <title>Light Off</title>
    <style>
      #main-div {
        background: "#ffffff";
      }
    </style>
  </head>
  <body>
    <div id="main-div"></div>
    <label>Rows: </label>
    <input type="number" value=5 id="row" onchange="changeRow()">
    <label>Columns: </label>
    <input type="number" value=5 id="col" onchange="changeCol()">
    <script>
      var row=0;
      var column=0;
      var squares = [];
      var row_div=[];
      const main_div = document.getElementById("main-div");
      const rowIn = document.getElementById("row");
      const colIn = document.getElementById("col");
      function mkDiv(r, c) {
        let rdiv = document.createElement('div');
        rdiv.onclick = "flip(r,c)";
        rdiv.style.width="50px";
        rdiv.style.height="50px";
        rdiv.style.border="#000000";
        rdiv.style.borderWidth="5px";
        return rdiv;
      }
      function changeRow() {
        if (Number(rowIn.value)>row){
          for (let r=row;r<Number(rowIn.value);r++){
            let currow = [];
            let currowdiv = document.createElement('div');
            main_div.appendChild(currowdiv);
            for (let c=0;c<column;c++){
              let newdiv = mkDiv(r,c);
              currowdiv.appendChild(newdiv);
              currow.push(newdiv);
            }
            squares.push(currow);
            row_div.push(currowdiv);
          }
        } else {
          for (let r=row-1; r>=Number(rowIn.value); r--) {
            let currow = squares.pop();
            let currowdiv = row_div.pop();
            for (let c=0;c<column;c++){
              currowdiv.removeChild(currow[c]);
            }
            main_div.removeChild(currowdiv);
          }
        }
        row = Number(rowIn.value);
      }
      function changeCol() {
        if (Number(colIn.value)>column){
          for (let c=column;c<Number(colIn.value);c++){
            for (let r=0;r<row;r++){
              let newdiv = mkDiv(r,c);
              row_div[r].appendChild(newdiv);
              squares[r].push(newdiv);
            }
          }
        } else {
          for (let c=column-1; c>=Number(colIn.value); c--) {
            for (let r=0;c<row;r++){
              row_div[r].removeChild(squares[r].pop());
            }
          }
        }
        row = Number(rowIn.value);
      }
      changeRow(5);
      changeCol(5);
    </script>
  </body>
</html>
